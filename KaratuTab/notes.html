<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">
    <!-- <link rel="stylesheet" href="style.css"> -->
    <title>Notes App</title>
    <style>
        body {
            font-family: 'Helvetica Neue', Arial, sans-serif;
            margin: 0;
            display: flex;
            height: 100vh;
            background-color: #f4f4f9;
            overflow: hidden;
            color: #2c3e50;
        }
        .sidebar {
            width: 280px;
            background-color: #2c3e50;
            color: #ecf0f1;
            padding: 20px;
            height: 100vh;
            overflow-y: auto;
            position: fixed;
            transition: transform 0.3s ease-in-out;
            z-index: 1000;
            box-shadow: 2px 0 5px rgba(0, 0, 0, 0.1);
        }
        .sidebar.hidden {
            transform: translateX(-100%);
        }
        .content {
            margin-left: 320px;
            padding: 20px;
            flex: 1;
            transition: margin-left 0.3s ease-in-out;
            overflow-y: auto;
            height: 100vh;
        }
        .content.full-width {
            margin-left: 0;
        }
        .toggle-sidebar-btn {
            /* position: fixed; */
            /* top: 20px; */
            /* left: 20px; */
            /* z-index: 1001; */
            /* background-color: #3498db; */
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            /* box-shadow: 0 2px 4px rgba(0,0,0,0.1); */
            transition: background-color 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
        }

        .toggle-sidebar-btn div {
            margin: 2px auto;
            background-color: #2c3e50;
            width: 30px;
            height: 5px;
            border-radius: 200px;

        }
        .toggle-sidebar-btn:hover {
            background-color: #2980b9;
        }
        .toggle-sidebar-btn.hidden {
            display: none;
        }
        .class, .subject {
            margin-bottom: 10px;
        }
        .class-title, .subject-title {
            font-weight: bold;
            cursor: pointer;
            padding: 10px;
            border-radius: 5px;
            transition: background-color 0.3s ease;
        }
        .class-title:hover, .subject:hover {
            background-color: #34495e;
        }
        .subjects {
            display: none;
            margin-left: 20px;
            padding-left: 10px;
            border-left: 2px solid #34495e;
        }

        .subjects.visible {
            display: block;
        }
        .subject-item {
            margin-bottom: 5px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .subject-item input[type="text"] {
            flex: 1;
            padding: 8px;
            margin-right: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
            transition: border-color 0.3s ease;
        }
        .subject-item button {
            background-color: #3498db;
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s ease, transform 0.2s ease;
        }
        .subject-item button:hover {
            background-color: #2980b9;
            transform: scale(1.05);
        }
        .subject-list {
            margin-top: 10px;
        }
        .subject-list .subject-item:last-child {
            margin-bottom: 0;
        }
        .note-list {
            margin-top: 20px;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        .note-item {
            cursor: pointer;
            background-color: white;
            padding: 15px;
            border-radius: 5px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            transition: background-color 0.3s ease, transform 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        .note-item:hover {
            background-color: #ecf0f1;
            transform: scale(1.02);
        }
        .note-form {
            margin-top: 20px;
            display: none;
            background-color: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
        }
        .note-form input[type="text"] {
            width: 96%;
            padding: 2%;
            margin-bottom: 15px;
            border: 1px solid #ccc;
            border-radius: 5px;
            transition: border-color 0.3s ease;
        }
        .note-form input[type="text"]:focus {
            border-color: #3498db;
        }
        #editor {
            height: 100%;
            background-color: white;
            border-radius: 5px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            min-height: 400px;
        }
        .btn {
            background-color: #3498db;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 200px;
            width: 50%;
            margin: 5% 25%;
            cursor: pointer;
            transition: background-color 0.3s ease, transform 0.2s ease;
        }
        .btn:hover {
            background-color: #2980b9;
            transform: scale(1.05);
        }
        .image-input {
            margin-bottom: 10px;
            display: none;
        }
        .note-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
        }
        .note-header h1 {
            margin: 0;
        }
        .delete-btn {
            background-color: white;
            color: #e74c3c;
            border: none;
            padding: 5px 10px;
            border-radius: 3px;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }
        .delete-btn:hover {
            background-color: #c0392b;
        }

        .cancle {
            background-color: transparent;
            color: red;
            font-weight: bold;
            font-size: medium;
            width: 10%;
            margin: 1% 90%;

        }
    </style>
</head>
<body>


<div class="sidebar" id="sidebar">
    <h1 style="font-size: 50px; margin-top: 0; background-color: #2c3e50; position: static; top: 0;">Folder</h1>
    <div class="classes">
        <h2>Classes</h2>
        <div class="class" data-class="JSS1">
            <div class="class-title">JSS1</div>
            <div class="subjects">
                <div class="subject" data-subject="Mathematics">Mathematics</div>
                <div class="subject" data-subject="English">English</div>
                <div class="subject" data-subject="Science">Basic Science</div>
                <div class="subject" data-subject="Science">Agricultural Science</div>
                <div class="subject" data-subject="Science">Basic Technology</div>
                <div class="subject" data-subject="Science">Civic Education</div>
                <div class="subject" data-subject="Science">Business Studies</div>
                <div class="subject" data-subject="Science">Social Studies</div>
                <div class="subject" data-subject="Science">Pysical and Health Education</div>
                <div class="subject" data-subject="Science">Computer Science</div>
                <div class="subject" data-subject="Science">Religion and National Values</div>
                <div class="subject" data-subject="Science">Cultural And Creative Art</div>
                <div class="subject" data-subject="Science">French Language</div>
                <div class="subject" data-subject="Science">Nigerian Languges</div>
                <div class="subject" data-subject="Science">Other Subjects</div>
            </div>
        </div>
        <div class="class" data-class="JSS2">
            <div class="class-title">JSS2</div>
            <div class="subjects">
                <div class="subject" data-subject="Mathematics">Mathematics</div>
                <div class="subject" data-subject="English">English</div>
                <div class="subject" data-subject="Science">Basic Science</div>
                <div class="subject" data-subject="Science">Agricultural Science</div>
                <div class="subject" data-subject="Science">Basic Technology</div>
                <div class="subject" data-subject="Science">Civic Education</div>
                <div class="subject" data-subject="Science">Business Studies</div>
                <div class="subject" data-subject="Science">Social Studies</div>
                <div class="subject" data-subject="Science">Pysical and Health Education</div>
                <div class="subject" data-subject="Science">Computer Science</div>
                <div class="subject" data-subject="Science">Religion and National Values</div>
                <div class="subject" data-subject="Science">Cultural And Creative Art</div>
                <div class="subject" data-subject="Science">French Language</div>
                <div class="subject" data-subject="Science">Nigerian Languges</div>
                <div class="subject" data-subject="Science">Other Subjects</div>
            </div>
        </div>
        <div class="class" data-class="JSS3">
            <div class="class-title">JSS3</div>
            <div class="subjects">
                <div class="subject" data-subject="Mathematics">Mathematics</div>
                <div class="subject" data-subject="English">English</div>
                <div class="subject" data-subject="Science">Basic Science</div>
                <div class="subject" data-subject="Science">Agricultural Science</div>
                <div class="subject" data-subject="Science">Basic Technology</div>
                <div class="subject" data-subject="Science">Civic Education</div>
                <div class="subject" data-subject="Science">Business Studies</div>
                <div class="subject" data-subject="Science">Social Studies</div>
                <div class="subject" data-subject="Science">Pysical and Health Education</div>
                <div class="subject" data-subject="Science">Computer Science</div>
                <div class="subject" data-subject="Science">Religion and National Values</div>
                <div class="subject" data-subject="Science">Cultural And Creative Art</div>
                <div class="subject" data-subject="Science">French Language</div>
                <div class="subject" data-subject="Science">Nigerian Languges</div>
                <div class="subject" data-subject="Science">Other Subjects</div>
            </div>
        </div>
        <div class="class" data-class="SS1">
            <div class="class-title">SS1</div>
            <div class="subjects">
                <h4>General Subjects</h4>
                <div class="subject" data-subject="Science">English Language</div>
                <div class="subject" data-subject="Science">Mathematics</div>
                <div class="subject" data-subject="Science">Civic Education</div>
                <div class="subject" data-subject="Science">Trade Subject (Data processing or Catering)</div>
                <h4>Science Stream</h4>
                <div class="subject" data-subject="Science">Physics</div>
                <div class="subject" data-subject="Science">Chemistry</div>
                <div class="subject" data-subject="Science">Biology</div>
                <div class="subject" data-subject="Science">Agricultural Science</div>
                <div class="subject" data-subject="Science">Futher Mathematics</div>
                <div class="subject" data-subject="Science">Geography</div>
                <div class="subject" data-subject="Science">Technical Drawing</div>
                <div class="subject" data-subject="Science">Computer Science</div>
                <h4>Commerce Stream</h4>
                <div class="subject" data-subject="Science">Commerce</div>
                <div class="subject" data-subject="Science">Economics</div>
                <div class="subject" data-subject="Science">Financial Accounting</div>
                <div class="subject" data-subject="Science">Marketing</div>
                <div class="subject" data-subject="Science">Geography</div>
                <div class="subject" data-subject="Science">Government</div>
                <div class="subject" data-subject="Science">Business Studies</div>
                <div class="subject" data-subject="Science">Computer Science</div>
                <h4>Art Stream</h4>
                <div class="subject" data-subject="Science">Fine Art</div>
                <div class="subject" data-subject="Science">Music</div>
                <div class="subject" data-subject="Science">Government</div>
                <div class="subject" data-subject="Science">Economics</div>
                <div class="subject" data-subject="Science">Religion</div>
                <div class="subject" data-subject="Science">Litrature in English</div>
                <div class="subject" data-subject="Science">History</div>
                <div class="subject" data-subject="Science">Geography</div>
            </div>
        </div>
        <div class="class" data-class="SS2">
            <div class="class-title">SS2</div>
            <div class="subjects">
                <h4>General Subjects</h4>
                <div class="subject" data-subject="Science">English Language</div>
                <div class="subject" data-subject="Science">Mathematics</div>
                <div class="subject" data-subject="Science">Civic Education</div>
                <div class="subject" data-subject="Science">Trade Subject (Data processing or Catering)</div>
                <h4>Science Stream</h4>
                <div class="subject" data-subject="Science">Physics</div>
                <div class="subject" data-subject="Science">Chemistry</div>
                <div class="subject" data-subject="Science">Biology</div>
                <div class="subject" data-subject="Science">Agricultural Science</div>
                <div class="subject" data-subject="Science">Futher Mathematics</div>
                <div class="subject" data-subject="Science">Geography</div>
                <div class="subject" data-subject="Science">Technical Drawing</div>
                <div class="subject" data-subject="Science">Computer Science</div>
                <h4>Commerce Stream</h4>
                <div class="subject" data-subject="Science">Commerce</div>
                <div class="subject" data-subject="Science">Economics</div>
                <div class="subject" data-subject="Science">Financial Accounting</div>
                <div class="subject" data-subject="Science">Marketing</div>
                <div class="subject" data-subject="Science">Geography</div>
                <div class="subject" data-subject="Science">Government</div>
                <div class="subject" data-subject="Science">Business Studies</div>
                <div class="subject" data-subject="Science">Computer Science</div>
                <h4>Art Stream</h4>
                <div class="subject" data-subject="Science">Fine Art</div>
                <div class="subject" data-subject="Science">Music</div>
                <div class="subject" data-subject="Science">Government</div>
                <div class="subject" data-subject="Science">Economics</div>
                <div class="subject" data-subject="Science">Religion</div>
                <div class="subject" data-subject="Science">Litrature in English</div>
                <div class="subject" data-subject="Science">History</div>
                <div class="subject" data-subject="Science">Geography</div>
            </div>
        </div>
        <div class="class" data-class="SS3">
            <div class="class-title">SS3</div>
            <div class="subjects">
                <h4>General Subjects</h4>
                <div class="subject" data-subject="Science">English Language</div>
                <div class="subject" data-subject="Science">Mathematics</div>
                <div class="subject" data-subject="Science">Civic Education</div>
                <div class="subject" data-subject="Science">Trade Subject (Data processing or Catering)</div>
                <h4>Science Stream</h4>
                <div class="subject" data-subject="Science">Physics</div>
                <div class="subject" data-subject="Science">Chemistry</div>
                <div class="subject" data-subject="Science">Biology</div>
                <div class="subject" data-subject="Science">Agricultural Science</div>
                <div class="subject" data-subject="Science">Futher Mathematics</div>
                <div class="subject" data-subject="Science">Geography</div>
                <div class="subject" data-subject="Science">Technical Drawing</div>
                <div class="subject" data-subject="Science">Computer Science</div>
                <h4>Commerce Stream</h4>
                <div class="subject" data-subject="Science">Commerce</div>
                <div class="subject" data-subject="Science">Economics</div>
                <div class="subject" data-subject="Science">Financial Accounting</div>
                <div class="subject" data-subject="Science">Marketing</div>
                <div class="subject" data-subject="Science">Geography</div>
                <div class="subject" data-subject="Science">Government</div>
                <div class="subject" data-subject="Science">Business Studies</div>
                <div class="subject" data-subject="Science">Computer Science</div>
                <h4>Art Stream</h4>
                <div class="subject" data-subject="Science">Fine Art</div>
                <div class="subject" data-subject="Science">Music</div>
                <div class="subject" data-subject="Science">Government</div>
                <div class="subject" data-subject="Science">Economics</div>
                <div class="subject" data-subject="Science">Religion</div>
                <div class="subject" data-subject="Science">Litrature in English</div>
                <div class="subject" data-subject="Science">History</div>
                <div class="subject" data-subject="Science">Geography</div>
            </div>
        </div>
    </div>
</div>

<div class="content" id="content">
    <div class="note-header">
        <div>
            <h1>Notes</h1>
        <h4 id="classSubjectTitle">Select a subject to take notes</h4>
        </div>
        <button class="toggle-sidebar-btn" id="toggleSidebarBtn">
            <div></div>
            <div></div>
            <div></div>
        </button>

    </div>

        <button class="btn" id="newNoteButton">Add New Note</button>

    <div class="note-list" id="noteList"></div>

    <div class="note-form" id="noteForm">
        <div>
            <button class="btn cancle" id="cancelNoteButton">x</button>
        </div>
        <input type="text" id="noteTitle" placeholder="Note Title">
        <div id="editor"></div>
        <button class="btn" id="saveNoteButton">Save Note</button>
        <input type="file" accept="image/*" id="imageInput" class="image-input">
    </div>
</div>

<script src="https://cdn.quilljs.com/1.3.6/quill.js"></script>
<script>
    const toggleSidebarBtn = document.getElementById('toggleSidebarBtn');
    const sidebar = document.getElementById('sidebar');
    const content = document.getElementById('content');
    const newNoteButton = document.getElementById('newNoteButton');
    const saveNoteButton = document.getElementById('saveNoteButton');
    const cancelNoteButton = document.getElementById('cancelNoteButton');
    const noteForm = document.getElementById('noteForm');
    const noteTitleInput = document.getElementById('noteTitle');
    const noteList = document.getElementById('noteList');
    const classSubjectTitle = document.getElementById('classSubjectTitle');
    const imageInput = document.getElementById('imageInput');

    let currentClass = null;
    let currentSubject = null;
    let currentNoteId = null;

    toggleSidebarBtn.addEventListener('click', () => {
        sidebar.classList.toggle('hidden');
        content.classList.toggle('full-width');
        // toggleSidebarBtn.classList.toggle('hidden');
    });

    document.querySelectorAll('.class').forEach(classElement => {
        classElement.querySelector('.class-title').addEventListener('click', () => {
            const subjects = classElement.querySelector('.subjects');
            subjects.style.display = subjects.style.display === 'block' ? 'none' : 'block';
        });

        const subjects = classElement.querySelectorAll('.subject');
        subjects.forEach(subjectElement => {
            subjectElement.addEventListener('click', () => {
                currentClass = classElement.dataset.class;
                currentSubject = subjectElement.dataset.subject;
                classSubjectTitle.textContent = `${currentClass} - ${currentSubject} Notes`;
                showNotes();
            });
        });
    });

    newNoteButton.addEventListener('click', () => {
        noteForm.style.display = 'block';
        noteTitleInput.value = '';
        quill.setContents([]);
        currentNoteId = null;
        newNoteButton.style.display = 'none';
        noteList.innerHTML = ''; // Clear note list when adding new note
    });

    cancelNoteButton.addEventListener('click', () => {
        noteForm.style.display = 'none';
        newNoteButton.style.display = 'block';
    });

    saveNoteButton.addEventListener('click', () => {
        if (!currentSubject) {
            alert('Please select a subject to save the note to.');
            return;
        }

        const noteTitle = noteTitleInput.value.trim();
        const noteContent = quill.root.innerHTML;

        if (!noteTitle || !noteContent) {
            alert('Please enter both title and content.');
            return;
        }

        const note = {
            id: currentNoteId || new Date().getTime(),
            title: noteTitle,
            content: noteContent,
            class: currentClass,
            subject: currentSubject,
            created: new Date().toLocaleString() // Add creation date
        };

        saveNoteToLocalStorage(note);
        noteForm.style.display = 'none';
        newNoteButton.style.display = 'block';
        showNotes();
    });

    const quill = new Quill('#editor', {
        theme: 'snow',
        modules: {
            toolbar: [
                [{ 'header': '1'}, { 'header': '2'}, { 'font': [] }],
                [{ 'list': 'ordered'}, { 'list': 'bullet' }],
                [{ 'align': [] }],
                ['bold', 'italic', 'underline'],
                ['image']
            ]
        }
    });

    imageInput.addEventListener('change', () => {
        const file = imageInput.files[0];
        if (file) {
            const reader = new FileReader();
            reader.onload = (e) => {
                const range = quill.getSelection();
                quill.insertEmbed(range.index, 'image', e.target.result);
            };
            reader.readAsDataURL(file);
        }
    });

    function showNotes() {
        noteList.innerHTML = '';
        const notes = getNotesFromLocalStorage();
        const filteredNotes = notes.filter(note => note.class === currentClass && note.subject === currentSubject);
        filteredNotes.forEach(note => {
            const noteItem = document.createElement('div');
            noteItem.className = 'note-item';
            noteItem.innerHTML = `
                <div>
                    <div>${note.title}</div>
                    <div class="note-created">${note.created}</div>
                </div>
                <button class="delete-btn">X</button>
            `;
            noteItem.querySelector('.delete-btn').addEventListener('click', (event) => {
                event.stopPropagation(); // Prevents event bubbling to parent note item
                deleteNoteById(note.id);
                showNotes();
            });
            noteItem.addEventListener('click', () => {
                noteForm.style.display = 'block';
                noteTitleInput.value = note.title;
                quill.root.innerHTML = note.content;
                currentNoteId = note.id;
                newNoteButton.style.display = 'none';
            });
            noteList.appendChild(noteItem);
        });
    }

    function getNotesFromLocalStorage() {
        return JSON.parse(localStorage.getItem('notes')) || [];
    }

    function saveNoteToLocalStorage(note) {
        const notes = getNotesFromLocalStorage();
        const existingNoteIndex = notes.findIndex(n => n.id === note.id);
        if (existingNoteIndex !== -1) {
            notes[existingNoteIndex] = note;
        } else {
            notes.push(note);
        }
        localStorage.setItem('notes', JSON.stringify(notes));
    }

    function deleteNoteById(noteId) {
        if (confirm('Are you sure you want to delete this note?')) {
            let notes = getNotesFromLocalStorage();
            notes = notes.filter(note => note.id !== noteId);
            localStorage.setItem('notes', JSON.stringify(notes));
        }
    }

    showNotes();

    // Function to save subjects to local storage
    function saveSubjectsToLocalStorage(className, subjects) {
        localStorage.setItem(className, JSON.stringify(subjects));
    }

    // Function to load subjects from local storage
    function loadSubjectsFromLocalStorage(className) {
        const subjects = localStorage.getItem(className);
        return subjects ? JSON.parse(subjects) : [];
    }

    // Function to display subjects
    function displaySubjects(className) {
        const subjectsContainer = document.getElementById(className + 'Subjects');
        subjectsContainer.innerHTML = ''; // Clear previous subjects

        const savedSubjects = loadSubjectsFromLocalStorage(className);
        savedSubjects.forEach(subject => {
            const newSubjectItem = document.createElement('div');
            newSubjectItem.className = 'subject';
            newSubjectItem.textContent = subject;
            subjectsContainer.appendChild(newSubjectItem);
        });
    }

    // Event listener for adding subjects
    addSubjectBtn.addEventListener('click', () => {
        const classElement = document.querySelector('.class.active');
        if (!classElement) return;

        const className = classElement.dataset.class;
        const subjectInput = newSubjectInput.value.trim();
        if (!subjectInput) return;

        const subjectsContainer = classElement.querySelector('.subjects');
        const newSubjectItem = document.createElement('div');
        newSubjectItem.className = 'subject';
        newSubjectItem.textContent = subjectInput;
        subjectsContainer.appendChild(newSubjectItem);

        // Save to local storage
        const savedSubjects = loadSubjectsFromLocalStorage(className);
        savedSubjects.push(subjectInput);
        saveSubjectsToLocalStorage(className, savedSubjects);

        newSubjectInput.value = '';
    });

    document.querySelectorAll('.class').forEach(classElement => {
        const className = classElement.dataset.class;
        displaySubjects(className);
    });


    function countNotesInSubject(subjectName) {
    // Get the stored notes from localStorage
    const notes = JSON.parse(localStorage.getItem('notes')) || {};

    // Get the notes for the specific subject
    const subjectNotes = notes[subjectName] || [];

    // Return the number of notes in the subject
    return subjectNotes.length;
}

// Function to update the subject list with note counts
function updateSubjectList() {
    document.querySelectorAll('.subject').forEach(subjectElement => {
        const subjectName = subjectElement.dataset.subject;
        const noteCount = countNotesInSubject(subjectName);
        subjectElement.textContent = `${subjectName} (${noteCount})`;
    });
}

// Call this function after adding a new note or when the page loads
updateSubjectList();

addNoteBtn.addEventListener('click', () => {
    // Existing logic to save a note
    saveNote();

    // Update the subject list to reflect the new note count
    updateSubjectList();
});

document.addEventListener('DOMContentLoaded', () => {
    updateSubjectList();
});

</script>
</body>
</html>
